[toc]



# CPU

## 构成

-   运算器：负责算术运算和逻辑运算
-   控制器：负责控制程序运行的流程
-   寄存器：负责暂存CPU处理过程中的信息（数据、地址以及指令信息），访问速度最快
-   高速缓存：有CPU中的MMU控制，访问速度比内存快，低于寄存器



## 寄存器



寄存器分为两类：

-   用户可见寄存器：对所有程序可用
    -   数据（通用）寄存器：用于各种算术逻辑指令和访存指令
    -   地址寄存器：存储数据以及指令的物理地址
    -   条件码寄存器：保存CPU操作结果的各种标记位
-   控制和状态寄存器：操作系统可用
    -   程序计数器：记录下一条要执行的指令的地址
    -   指令寄存器：记录最近取出的地址
    -   程序状态字：记录了CPU运行模式的信息



## 指令执行的基本过程



![image-20200525225743342](https://images-1255831004.cos.ap-guangzhou.myqcloud.com/online/image-20200525225743342.png)

>   程序的执行就是由不断获取指令、执行指令周期组成



指令的类型：

-   访问存储器指令：负责CPU和存储器之间的数据传送
-   I/O指令：负责CPU和I/O模块之间的数据传送和命令发送
-   算术逻辑指令（数据处理指令）：执行关于数据的算术和逻辑操作
-   控制转移指令：指定一个新指令的执行起点
-   CPU控制指令：用于修改处理机状态



## 特权指令和非特权指令

>   如果某微型计算机是处于多用户或多任务的多道程序设计环境中，则它的指令系统中的指令必须分成两部分：特权指令和非特权指令。



特权指令：只能由操作系统执行

非特权指令：用户和操作系统都能执行

>   如果用户使用特权指令，一半会引起一次CPU状态切换



## CPU状态

>   多数系统将CPU工作状态划分为管态和目态



管态，又称特权态，具备交高的权限级别，可以执行全部指令，使用全部资源

目态，又称用户态，具有较低的权限级别

>   不同系统划分的状态不一定相同，不是所有系统都是管态和目态，有些系统会划分多个系统状态



## 程序状态字

>   为了解决处理机当前工作状态的问题，所有的处理机都有一些特殊寄存器，用以表明处理机当前的工作状态。



状态字包括：

-   CPU的工作状态代码：指令CPU目前处于管态还是目态
-   条件码：反应执行后的结果特征
-   中断屏蔽码：是否允许中断